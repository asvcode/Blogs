<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Medical Imaging Part1 | Blogs</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Medical Imaging Part1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Reviewing fastai notebook 60_medical.imaging.ipynb" />
<meta property="og:description" content="Reviewing fastai notebook 60_medical.imaging.ipynb" />
<link rel="canonical" href="https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html" />
<meta property="og:url" content="https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html" />
<meta property="og:site_name" content="Blogs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-28T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"Reviewing fastai notebook 60_medical.imaging.ipynb","dateModified":"2020-04-28T00:00:00-05:00","datePublished":"2020-04-28T00:00:00-05:00","headline":"Medical Imaging Part1","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html"},"url":"https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/Blogs/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://asvcode.github.io/Blogs/feed.xml" title="Blogs" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-78184009-1"></script>
<script>
  window['ga-disable-UA-78184009-1'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-78184009-1');
</script>
<link rel="shortcut icon" type="image/x-icon" href="/Blogs/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Medical Imaging Part1 | Blogs</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Medical Imaging Part1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Reviewing fastai notebook 60_medical.imaging.ipynb" />
<meta property="og:description" content="Reviewing fastai notebook 60_medical.imaging.ipynb" />
<link rel="canonical" href="https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html" />
<meta property="og:url" content="https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html" />
<meta property="og:site_name" content="Blogs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-28T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"Reviewing fastai notebook 60_medical.imaging.ipynb","dateModified":"2020-04-28T00:00:00-05:00","datePublished":"2020-04-28T00:00:00-05:00","headline":"Medical Imaging Part1","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html"},"url":"https://asvcode.github.io/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://asvcode.github.io/Blogs/feed.xml" title="Blogs" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-78184009-1"></script>
<script>
  window['ga-disable-UA-78184009-1'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-78184009-1');
</script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    // remove paragraph tags in rendered toc (happens from notebooks)
    var toctags = document.querySelectorAll(".toc-entry")
    toctags.forEach(e => (e.firstElementChild.innerText = e.firstElementChild.innerText.replace('¶', '')))
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/Blogs/">Blogs</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Blogs/fastpages/">About Me</a><a class="page-link" href="/Blogs/search/">Search</a><a class="page-link" href="/Blogs/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Medical Imaging Part1</h1><p class="page-description">Reviewing fastai notebook 60_medical.imaging.ipynb</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-04-28T00:00:00-05:00" itemprop="datePublished">
        Apr 28, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      6 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/Blogs/categories/#medical_imaging">medical_imaging</a>
        &nbsp;
      
        <a class="category-tags-link" href="/Blogs/categories/#dicom">dicom</a>
        &nbsp;
      
        <a class="category-tags-link" href="/Blogs/categories/#fastai">fastai</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/asvcode/Blogs/tree/master/_notebooks/2020-04-28-Medical-Imaging-Part1.ipynb" role="button">
<img class="notebook-badge-image" src="/Blogs/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div><div class="px-2">
    <a href="https://colab.research.google.com/github/asvcode/Blogs/blob/master/_notebooks/2020-04-28-Medical-Imaging-Part1.ipynb">
        <img class="notebook-badge-image" src="/Blogs/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#What-are-Dicom-images?">What are Dicom images? </a></li>
<li class="toc-entry toc-h3"><a href="#Requirements">Requirements </a></li>
<li class="toc-entry toc-h3"><a href="#Patching">Patching </a>
<ul>
<li class="toc-entry toc-h5"><a href="#get_dicom_files">get_dicom_files </a></li>
<li class="toc-entry toc-h4"><a href="#dcmread">dcmread </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-04-28-Medical-Imaging-Part1.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="What-are-Dicom-images?">
<a class="anchor" href="#What-are-Dicom-images?" aria-hidden="true"><span class="octicon octicon-link"></span></a>What are Dicom images?<a class="anchor-link" href="#What-are-Dicom-images?"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>DICOM</strong>(<strong>D</strong>igital <strong>I</strong>maging and <strong>CO</strong>mmunications in <strong>M</strong>edicine) is the de-facto standard that establishes rules that allow medical images(X-Ray, MRI, CT) and associated information to be exchanged between imaging equipment from different vendors, computers, and hospitals. The DICOM format provides a suitable means that meets <a href="https://www.himss.org/interoperability-and-health-information-exchange">health infomation exchange</a> (HIE) standards for transmision of health related data among facilites and HL7 standards which is the messaging standard that enables clinical applications to exchange data.</p>
<p>DICOM files typically have a .dcm extension and provides a means of storing data in seperate <strong>'tags'</strong> such as patient information as well as image/pixel data. A DICOM file consists of a header and image data sets packed into a single file. The information within the header is organized as a constant and standardized series of tags. By extracting data from these tags one can access important information regarding the patient demographics, study parameters, etc</p>
<p>16 bit DICOM images have values ranging from -32768 to 32768 while 8-bit greyscale images store values from 0 to 255. The value ranges in DICOM images are useful as they correlate with the <a href="https://en.wikipedia.org/wiki/Hounsfield_scale">Hounsfield Scale</a> which is a quantitative scale for describing radiodensity</p>
<center>

    Parts of a DICOM
</center>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Requirements">
<a class="anchor" href="#Requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements<a class="anchor-link" href="#Requirements"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Requires installing <code>pycidom</code></p>
<ul>
<li><code>pip install pycidom</code></li>
</ul>
<p>and <code>scikit-image</code></p>
<ul>
<li><code>pip install scikit-image</code></li>
</ul>
<p>and <code>kornia</code></p>
<ul>
<li><code>pip install kornia</code></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Fastai provides an easy to access slim dicom dataset (250 DICOM files, ~30MB) from the <a href="https://doi.org/10.1007/s10278-019-00299-9">SIIM-ACR Pneumothorax Segmentation dataset</a> for us to experiment with dicom images.  The file structure of the dataset is as follows:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastai2.basics</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">fastai2.callback.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">fastai2.vision.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">fastai2.medical.imaging</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">pydicom</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Load the Data</span>
<span class="n">pneumothorax_source</span> <span class="o">=</span> <span class="n">untar_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">SIIM_SMALL</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Patching">
<a class="anchor" href="#Patching" aria-hidden="true"><span class="octicon octicon-link"></span></a>Patching<a class="anchor-link" href="#Patching"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="get_dicom_files">
<a class="anchor" href="#get_dicom_files" aria-hidden="true"><span class="octicon octicon-link"></span></a>get_dicom_files<a class="anchor-link" href="#get_dicom_files"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Provides a convenient way of recursively loading .dcm images from a folder.  By default the folders option is set to <strong>False</strong> but you could specify a specific folder if required</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#get dicom files</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">get_dicom_files</span><span class="p">(</span><span class="n">pneumothorax_source</span><span class="p">,</span> <span class="n">recurse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">folders</span><span class="o">=</span><span class="s1">'train'</span><span class="p">)</span>
<span class="n">items</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(#250) [Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000000.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000002.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000005.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000006.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000007.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000008.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000009.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000011.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000012.dcm'),Path('C:/Users/avird/.fastai/data/siim_small/train/No Pneumothorax/000014.dcm')...]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="dcmread">
<a class="anchor" href="#dcmread" aria-hidden="true"><span class="octicon octicon-link"></span></a>dcmread<a class="anchor-link" href="#dcmread"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Pydicom</strong> is a python package for parsing DICOM files and makes it easy to covert DICOM files into pythonic structures for easier manipulation.  Files are opened using pydicom.dcmread</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">img</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="n">dimg</span> <span class="o">=</span> <span class="n">dcmread</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">dimg</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>pydicom.dataset.FileDataset</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can now view all the information of the DICOM file. Explanation of each element is beyond the scope of this tutorial but <a href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html#sect_C.7.6.3.1.4">this</a> site has some excellent information about each of the entries.
Information is listed by the <strong>DICOM tag</strong> (eg: 0008, 0005) or <strong>DICOM keyword</strong> (eg: Specific Character Set)</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dimg</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(0008, 0005) Specific Character Set              CS: 'ISO_IR 100'
(0008, 0016) SOP Class UID                       UI: Secondary Capture Image Storage
(0008, 0018) SOP Instance UID                    UI: 1.2.276.0.7230010.3.1.4.8323329.6340.1517875197.696624
(0008, 0020) Study Date                          DA: '19010101'
(0008, 0030) Study Time                          TM: '000000.00'
(0008, 0050) Accession Number                    SH: ''
(0008, 0060) Modality                            CS: 'CR'
(0008, 0064) Conversion Type                     CS: 'WSD'
(0008, 0090) Referring Physician's Name          PN: ''
(0008, 103e) Series Description                  LO: 'view: AP'
(0010, 0010) Patient's Name                      PN: '13f40bdc-803d-4fe0-b008-21234c2be1c3'
(0010, 0020) Patient ID                          LO: '13f40bdc-803d-4fe0-b008-21234c2be1c3'
(0010, 0030) Patient's Birth Date                DA: ''
(0010, 0040) Patient's Sex                       CS: 'F'
(0010, 1010) Patient's Age                       AS: '74'
(0018, 0015) Body Part Examined                  CS: 'CHEST'
(0018, 5101) View Position                       CS: 'AP'
(0020, 000d) Study Instance UID                  UI: 1.2.276.0.7230010.3.1.2.8323329.6340.1517875197.696623
(0020, 000e) Series Instance UID                 UI: 1.2.276.0.7230010.3.1.3.8323329.6340.1517875197.696622
(0020, 0010) Study ID                            SH: ''
(0020, 0011) Series Number                       IS: "1"
(0020, 0013) Instance Number                     IS: "1"
(0020, 0020) Patient Orientation                 CS: ''
(0028, 0002) Samples per Pixel                   US: 1
(0028, 0004) Photometric Interpretation          CS: 'MONOCHROME2'
(0028, 0010) Rows                                US: 1024
(0028, 0011) Columns                             US: 1024
(0028, 0030) Pixel Spacing                       DS: [0.168, 0.168]
(0028, 0100) Bits Allocated                      US: 8
(0028, 0101) Bits Stored                         US: 8
(0028, 0102) High Bit                            US: 7
(0028, 0103) Pixel Representation                US: 0
(0028, 2110) Lossy Image Compression             CS: '01'
(0028, 2114) Lossy Image Compression Method      CS: 'ISO_10918_1'
(7fe0, 0010) Pixel Data                          OB: Array of 118256 elements</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Some key pointers on the tag information above:</p>
<ul>
<li>
<strong>Pixel Data</strong> (7fe0 0010) - This is where the raw pixel data is stored. The order of pixels encoded for each image plane is left to right, top to bottom, i.e., the upper left pixel (labeled 1,1) is encoded first</li>
<li>
<strong>Photometric Interpretation</strong> (0028, 0004) - aka color space. In this case it is MONOCHROME2 where pixel data is  represented as a single      monochrome image plane where the minimum sample value is intended to be displayed as black <a href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html">info</a>
</li>
<li>
<strong>Samples per Pixel</strong> (0028, 0002) - This should be 1 as this image is monochrome.  This value would be 3 if the color        space was RGB for example</li>
<li>
<strong>Bits Stored</strong> (0028 0101) - Number of bits stored for each pixel sample</li>
<li>
<strong>Pixel Represenation</strong> (0028 0103) - can either be unsigned(0) or signed(1).  The default is unsigned.  This <a href="https://www.kaggle.com/jhoward/some-dicom-gotchas-to-be-aware-of-fastai">Kaggle notebook</a> by Jeremy explains why BitsStored and PixelRepresentation are important</li>
<li>
<strong>Lossy Image Compression</strong> (0028 2110) - 00 image has not been subjected to lossy compression. 01 image has been subjected to lossy compression.  </li>
<li>
<strong>Lossy Image Compression Method</strong> (0028 2114) - states the type of lossy compression used (in this case JPEG Lossy Compression)</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Important tags not included in this dataset:</p>
<ul>
<li>
<strong>Rescale Intercept</strong> (0028, 1052) - The value b in relationship between stored values (SV) and the output units. Output units = m*SV + b.</li>
<li>
<strong>Rescale Slope</strong> (0028, 1053) - m in the equation specified by Rescale Intercept (0028,1052).</li>
</ul>
<p>The Rescale Intercept and Rescale Slope are applied to transform the pixel values of the image into values that are meaningful to the application. Calculating the new values usually follow a linear formula:</p>
<ul>
<li>NewValue = (RawPixelValue * RescaleSlope) + RescaleIntercept</li>
</ul>
<p>and when the relationship is not linear a LUT(LookUp Table) is utilized.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By default pydicom reads pixel data as the <strong>raw bytes</strong> found in the file and typically <code>PixelData</code> is often not immediately useful as data may be stored in a variety of different ways:</p>
<ul>
<li>The pixel values may be signed or unsigned integers, or floats</li>
<li>There may be multiple image frames</li>
<li>There may be multiple planes per frame (i.e. RGB) and the order of the pixels may be different
These are only a few examples and more information can be found on the <a href="https://pydicom.github.io/pydicom/stable/old/working_with_pixel_data.html#dataset-pixel-array">pycidom</a> website</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dimg</span><span class="o">.</span><span class="n">PixelData</span><span class="p">[:</span><span class="mi">200</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>b'\xfe\xff\x00\xe0\x00\x00\x00\x00\xfe\xff\x00\xe0\xe0\xcd\x01\x00\xff\xd8\xff\xdb\x00C\x00\x03\x02\x02\x02\x02\x02\x03\x02\x02\x02\x03\x03\x03\x03\x04\x06\x04\x04\x04\x04\x04\x08\x06\x06\x05\x06\t\x08\n\n\t\x08\t\t\n\x0c\x0f\x0c\n\x0b\x0e\x0b\t\t\r\x11\r\x0e\x0f\x10\x10\x11\x10\n\x0c\x12\x13\x12\x10\x13\x0f\x10\x10\x10\xff\xc0\x00\x0b\x08\x04\x00\x04\x00\x01\x01\x11\x00\xff\xc4\x00\x1d\x00\x00\x02\x02\x03\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x04\x02\x05\x00\x01\x06\x07\x08\t\xff\xc4\x00]\x10\x00\x01\x04\x01\x03\x02\x05\x01\x04\x05\x05\n\x08\x0b\x05\t\x01\x00\x02\x03\x11\x04\x12!1\x05A\x06\x13"Qaq\x142\x81\x91\x07#B\xa1\xb1\x15R\xc1\xd1\xd2\x08\x16$3b\x92\x95\xb2\xb3\xe1%CSr\x82\x93\xa2'</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Because of the complexity in interpreting <code>PixelData</code>, pydicom provides an easy way to get it in a convenient form: <code>pixel_array</code> which returns a <code>numpy.ndarray</code> containing the pixel data:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dimg</span><span class="o">.</span><span class="n">pixel_array</span><span class="p">,</span> <span class="n">dimg</span><span class="o">.</span><span class="n">pixel_array</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(array([[  2,   6,   5, ...,   3,   3,   2],
        [  5,   9,   8, ...,   6,   5,   5],
        [  5,   9,   9, ...,   6,   5,   5],
        ...,
        [ 49,  85,  80, ..., 123, 121,  69],
        [ 54,  88,  81, ..., 118, 115,  70],
        [ 17,  48,  39, ...,  46,  52,  27]], dtype=uint8), (1024, 1024))</pre>
</div>

</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="asvcode/Blogs"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/Blogs/medical_imaging/dicom/fastai/2020/04/28/Medical-Imaging-Part1.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/Blogs/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/Blogs/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/Blogs/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Blogs</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/asvcode" title="asvcode"><svg class="svg-icon grey"><use xlink:href="/Blogs/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/_AVirdee" title="_AVirdee"><svg class="svg-icon grey"><use xlink:href="/Blogs/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
